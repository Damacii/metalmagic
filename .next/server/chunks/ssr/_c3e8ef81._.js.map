{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-dom.ts","../../../../node_modules/next/src/shared/lib/image-external.tsx","../../../../node_modules/next/image.js","../../../../components/GalleryFilterGrid.tsx","../../../../components/GalleryGrid.tsx","../../../../lib/adminConfig.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactDOM\n","import type { ImageConfigComplete, ImageLoaderProps } from './image-config'\nimport type { ImageProps, ImageLoader, StaticImageData } from './get-img-props'\n\nimport { getImgProps } from './get-img-props'\nimport { Image } from '../../client/image-component'\n\n// This is replaced by webpack alias\nimport defaultLoader from 'next/dist/shared/lib/image-loader'\n\n/**\n * For more advanced use cases, you can call `getImageProps()`\n * to get the props that would be passed to the underlying `<img>` element,\n * and instead pass to them to another component, style, canvas, etc.\n *\n * Read more: [Next.js docs: `getImageProps`](https://nextjs.org/docs/app/api-reference/components/image#getimageprops)\n */\nexport function getImageProps(imgProps: ImageProps) {\n  const { props } = getImgProps(imgProps, {\n    defaultLoader,\n    // This is replaced by webpack define plugin\n    imgConf: process.env.__NEXT_IMAGE_OPTS as any as ImageConfigComplete,\n  })\n  // Normally we don't care about undefined props because we pass to JSX,\n  // but this exported function could be used by the end user for anything\n  // so we delete undefined props to clean it up a little.\n  for (const [key, value] of Object.entries(props)) {\n    if (value === undefined) {\n      delete props[key as keyof typeof props]\n    }\n  }\n  return { props }\n}\n\nexport default Image\n\nexport type { ImageProps, ImageLoaderProps, ImageLoader, StaticImageData }\n","module.exports = require('./dist/shared/lib/image-external')\n","'use client';\n\nimport { useEffect, useMemo, useState } from 'react';\nimport GalleryGrid, { type GalleryItem } from '@/components/GalleryGrid';\nimport { DEFAULT_GALLERY_CATEGORIES } from '@/lib/adminConfig';\n\ntype GalleryFilterGridProps = {\n  items: GalleryItem[];\n};\n\nexport default function GalleryFilterGrid({ items }: GalleryFilterGridProps) {\n  const [localItems, setLocalItems] = useState<GalleryItem[] | null>(null);\n  const [activeFilter, setActiveFilter] = useState('All');\n\n  useEffect(() => {\n    let isMounted = true;\n    const loadLocalItems = async () => {\n      try {\n        const response = await fetch('/api/gallery/local', { cache: 'no-store' });\n        if (!response.ok) throw new Error('Failed');\n        const payload = (await response.json()) as { items?: GalleryItem[] };\n        if (!isMounted) return;\n        setLocalItems(payload.items ?? []);\n      } catch {\n        if (!isMounted) return;\n        setLocalItems([]);\n      }\n    };\n\n    loadLocalItems();\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const baseItems = localItems && localItems.length > 0 ? localItems : items;\n  const mergedItems = useMemo(() => baseItems, [baseItems]);\n\n  const categories = useMemo(() => {\n    const available = new Set<string>();\n    mergedItems.forEach((item) => {\n      item.tags.forEach((tag) => available.add(tag));\n    });\n    available.delete('Gallery');\n    available.delete('gallery');\n    const extras = Array.from(available).filter(\n      (category) => !DEFAULT_GALLERY_CATEGORIES.includes(category)\n    );\n    return ['All', ...DEFAULT_GALLERY_CATEGORIES, ...extras];\n  }, [mergedItems]);\n\n  const filteredItems = useMemo(() => {\n    if (activeFilter === 'All') return mergedItems;\n    return mergedItems.filter((item) => item.tags.includes(activeFilter));\n  }, [mergedItems, activeFilter]);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex flex-wrap gap-3\">\n        {categories.map((category) => (\n          <button\n            key={category}\n            type=\"button\"\n            onClick={() => setActiveFilter(category)}\n            className={`rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-[0.25em] transition ${\n              activeFilter === category\n                ? 'border-[#1D3461] bg-[#1D3461] !text-white'\n                : 'border-white/15 bg-white/5 text-white/70 hover:border-white/40 hover:text-white'\n            }`}\n          >\n            {category}\n          </button>\n        ))}\n      </div>\n      <GalleryGrid items={filteredItems} />\n    </div>\n  );\n}\n","'use client';\n\nimport Image from 'next/image';\nimport { type DragEvent, type MouseEvent, useEffect, useMemo, useState } from 'react';\n\nexport type GalleryItem = {\n  src: string;\n  tags: string[];\n};\n\ntype GalleryGridProps = {\n  items: GalleryItem[];\n};\n\nexport default function GalleryGrid({ items }: GalleryGridProps) {\n  const [activeIndex, setActiveIndex] = useState<number | null>(null);\n  const [hiddenSrcs, setHiddenSrcs] = useState<string[]>([]);\n\n  const handleDragStart = (event: DragEvent) => {\n    event.preventDefault();\n  };\n\n  useEffect(() => {\n    if (activeIndex === null) return;\n\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === 'Escape') {\n        setActiveIndex(null);\n        return;\n      }\n      if (event.key === 'ArrowRight') {\n        setActiveIndex((prev) => {\n          if (prev === null) return prev;\n          return (prev + 1) % items.length;\n        });\n      }\n      if (event.key === 'ArrowLeft') {\n        setActiveIndex((prev) => {\n          if (prev === null) return prev;\n          return (prev - 1 + items.length) % items.length;\n        });\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [activeIndex, items.length]);\n\n  const visibleItems = useMemo(\n    () => items.filter((item) => !hiddenSrcs.includes(item.src)),\n    [items, hiddenSrcs]\n  );\n\n  const activeItem = activeIndex !== null ? visibleItems[activeIndex] : null;\n\n  return (\n    <>\n      <div className=\"columns-1 sm:columns-2 lg:columns-4 [column-gap:1rem]\">\n        {visibleItems.map((item, index) => (\n          <button\n            key={`${item.src}-${index}`}\n            type=\"button\"\n            onClick={() => setActiveIndex(index)}\n            onDragStart={handleDragStart}\n            style={{ WebkitTouchCallout: 'none' }}\n            className=\"group relative mb-4 w-full break-inside-avoid overflow-hidden rounded-2xl border border-white/10 bg-white/5 text-left\"\n          >\n            <Image\n              src={item.src}\n              alt={`${item.tags[0] ?? 'Project'} project`}\n              width={640}\n              height={480}\n              sizes=\"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 25vw\"\n              quality={70}\n              unoptimized\n              draggable={false}\n              onDragStart={handleDragStart}\n              onError={() =>\n                setHiddenSrcs((prev) => (prev.includes(item.src) ? prev : [...prev, item.src]))\n              }\n              className=\"pointer-events-none h-auto w-full select-none transition duration-500 group-hover:scale-[1.02]\"\n            />\n            <div className=\"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent\" />\n            <div\n              className=\"pointer-events-none absolute inset-0 opacity-10\"\n              style={{\n                backgroundImage: \"url('/gallery/logo metal magic white.png')\",\n                backgroundRepeat: 'repeat',\n                backgroundSize: '140px 140px',\n                backgroundPosition: 'center'\n              }}\n            />\n          </button>\n        ))}\n      </div>\n      {activeItem ? (\n        <div\n          className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/80 px-4 py-10\"\n          role=\"dialog\"\n          aria-modal=\"true\"\n          style={{ WebkitTouchCallout: 'none' }}\n        >\n          <button\n            type=\"button\"\n            aria-label=\"Close\"\n            onClick={() => setActiveIndex(null)}\n            className=\"absolute right-6 top-6 rounded-full bg-[#1D3461] force-white px-3 py-2 text-sm font-semibold text-white transition hover:bg-black\"\n          >\n            X\n          </button>\n          <div className=\"relative flex flex-col items-center\">\n            <div className=\"relative\">\n              <Image\n                src={activeItem.src}\n                alt={`${activeItem.tags[0] ?? 'Project'} enlarged`}\n                width={1600}\n                height={1200}\n                sizes=\"(max-width: 768px) 95vw, 90vw\"\n                unoptimized\n                loading=\"eager\"\n                draggable={false}\n                onDragStart={handleDragStart}\n                onError={() => {\n                  setHiddenSrcs((prev) =>\n                    prev.includes(activeItem.src) ? prev : [...prev, activeItem.src]\n                  );\n                  setActiveIndex((prev) => {\n                    if (prev === null) return prev;\n                    return visibleItems.length > 1 ? (prev + 1) % visibleItems.length : null;\n                  });\n                }}\n                className=\"pointer-events-none h-auto max-h-[80vh] w-auto max-w-[90vw] select-none rounded-2xl border border-white/10 object-contain\"\n                priority\n              />\n              <div\n                className=\"pointer-events-none absolute inset-0 opacity-10\"\n                style={{\n                  backgroundImage: \"url('/gallery/logo metal magic white.png')\",\n                  backgroundRepeat: 'repeat',\n                  backgroundSize: '180px 180px',\n                  backgroundPosition: 'center'\n                }}\n              />\n              <button\n                type=\"button\"\n                aria-label=\"Previous image\"\n                onClick={() =>\n                  setActiveIndex((prev) =>\n                    prev === null ? prev : (prev - 1 + visibleItems.length) % visibleItems.length\n                  )\n                }\n                className=\"absolute -left-[70px] top-1/2 hidden -translate-y-1/2 rounded-full bg-[#1D3461] force-white px-3 py-2 text-sm font-semibold text-white transition hover:bg-black md:block\"\n              >\n                Prev\n              </button>\n              <button\n                type=\"button\"\n                aria-label=\"Next image\"\n                onClick={() =>\n                  setActiveIndex((prev) =>\n                    prev === null ? prev : (prev + 1) % visibleItems.length\n                  )\n                }\n                className=\"absolute -right-[70px] top-1/2 hidden -translate-y-1/2 rounded-full bg-[#1D3461] force-white px-3 py-2 text-sm font-semibold text-white transition hover:bg-black md:block\"\n              >\n                Next\n              </button>\n            </div>\n            <div className=\"mt-4 flex items-center justify-between gap-4 text-xs uppercase tracking-[0.3em] text-white/60\">\n              <span>{activeItem.tags.join(' â€¢ ')}</span>\n              <span>\n                {(activeIndex ?? 0) + 1} / {visibleItems.length}\n              </span>\n            </div>\n          </div>\n        </div>\n      ) : null}\n    </>\n  );\n}\n","export const DEFAULT_GALLERY_CATEGORIES = [\n  'Fences',\n  'Railing',\n  'Stairs',\n  'Gates',\n  'Security',\n  'Automatic Gate System',\n  'Repairs',\n  'Others'\n];\n"],"names":["module","exports","require","vendored","ReactDOM","getImageProps","imgProps","props","getImgProps","defaultLoader","imgConf","process","env","__NEXT_IMAGE_OPTS","key","value","Object","entries","undefined","Image"],"mappings":"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","ignoreList":[0,1,2]}