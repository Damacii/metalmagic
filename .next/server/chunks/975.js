exports.id=975,exports.ids=[975],exports.modules={9851:(e,r,t)=>{Promise.resolve().then(t.bind(t,1032))},1032:(e,r,t)=>{"use strict";t.d(r,{default:()=>o});var a=t(326),s=t(6226),l=t(7577),i=t(5830),n=t(5472),d=t(9759);function o(){let[e,r]=(0,l.useState)(null),[t,o]=(0,l.useState)(null),[c,g]=(0,l.useState)(i.o),[u,x]=(0,l.useState)({}),[m,p]=(0,l.useState)(null),[b,y]=(0,l.useState)(!0),[h,f]=(0,l.useState)(!1),[v,w]=(0,l.useState)(null),[N,j]=(0,l.useState)({}),[S,k]=(0,l.useState)(i.N),[C,O]=(0,l.useState)(""),[A,P]=(0,l.useState)(""),[_,U]=(0,l.useState)(d.rk),I=(0,l.useRef)(null),L=e?.toLowerCase()===i.N.toLowerCase(),E=!!e,z=(0,l.useMemo)(()=>_.map(e=>({...e,category:N[e.src]??u[e.src]??e.tags[0]??"Other"})),[_,u,N]),G=async e=>{if(e.preventDefault(),o(null),!n.O){o("Supabase is not configured.");return}let{error:r}=await n.O.auth.signInWithOtp({email:S,options:{shouldCreateUser:!1}});o(r?r.message:"Check your email for the sign-in link.")},M=async()=>{if(o(null),!n.O){o("Supabase is not configured.");return}if(!S||!C){o("Enter an email and password to log in.");return}let{error:e}=await n.O.auth.signInWithPassword({email:S,password:C});o(e?e.message:"Signed in.")},T=async()=>{n.O&&(await n.O.auth.signOut(),r(null))},B=(e,r)=>{j(t=>({...t,[e]:r}))},D=async e=>{if(!n.O||!L)return;let r=N[e];if(!r)return;p(e),o(null);let{error:t}=await n.O.from("gallery_items").upsert({src:e,category:r},{onConflict:"src"});t?o(t.message):(x(t=>({...t,[e]:r})),j(r=>{let t={...r};return delete t[e],t})),p(null)},F=async e=>{let r=Array.from(e.target.files??[]);if(r.length&&n.O){w(null),f(!0);try{let e=[];for(let t of r){let r=t.name.replace(/\s+/g,"-"),a=`${Date.now()}-${r}`,{error:s}=await n.O.storage.from("Fotos").upload(a,t,{cacheControl:"3600",upsert:!1});if(s)throw s;let{data:l}=n.O.storage.from("Fotos").getPublicUrl(a),i=l.publicUrl;e.push({src:i,tags:["Gallery"]}),x(e=>({...e,[i]:"Gallery"})),await n.O.from("gallery_items").upsert({src:i,category:"Gallery"},{onConflict:"src"})}U(r=>[...e,...r]),w("Upload complete.")}catch(e){w(e instanceof Error?e.message:"Upload failed.")}finally{f(!1),I.current&&(I.current.value="")}}};return a.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,a.jsxs)("div",{className:"container",children:[n.O?null:a.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 text-sm text-gray-600 shadow-sm",children:"Set `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` to enable admin access."}),b?a.jsx("div",{className:"mt-6 text-sm text-gray-500",children:"Loading your session..."}):null,b||L||E?null:(0,a.jsxs)("div",{className:"mt-8 grid gap-8 lg:grid-cols-[1.1fr_0.9fr] lg:items-center",children:[(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-10 text-gray-900 shadow-sm",children:[a.jsx("div",{className:"inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-100 px-4 py-2 text-[11px] uppercase tracking-[0.35em] text-gray-600",children:"Admin Studio"}),a.jsx("h2",{className:"mt-6 text-4xl font-semibold text-gray-900 md:text-5xl",children:"Tag the gallery with precision."}),a.jsx("p",{className:"mt-4 max-w-lg text-base text-gray-600",children:"Organize images by category so visitors can filter instantly. Only verified admin accounts can update tags."}),(0,a.jsxs)("div",{className:"mt-8 grid gap-4 md:grid-cols-3",children:[a.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 text-sm text-gray-700",children:"Live tags"}),a.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 text-sm text-gray-700",children:"Supabase sync"}),a.jsx("div",{className:"rounded-xl border border-gray-200 bg-gray-50 p-4 text-sm text-gray-700",children:"Admin-only"})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-8 text-gray-900 shadow-sm",children:[a.jsx("div",{className:"text-xs uppercase tracking-[0.35em] text-gray-500",children:"Sign In"}),a.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Use your admin email to receive a magic link or sign in with a password."}),(0,a.jsxs)("form",{onSubmit:G,className:"mt-6 grid gap-5",children:[(0,a.jsxs)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:["Email",a.jsx("input",{type:"email",required:!0,value:S,onChange:e=>k(e.target.value),className:"mt-2 w-full rounded-2xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-900 placeholder-gray-400 focus:border-gray-300 focus:outline-none"})]}),(0,a.jsxs)("label",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:["Password (optional)",a.jsx("input",{type:"password",value:C,onChange:e=>O(e.target.value),className:"mt-2 w-full rounded-2xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-900 placeholder-gray-400 focus:border-gray-300 focus:outline-none"})]}),(0,a.jsxs)("div",{className:"grid gap-3",children:[a.jsx("button",{type:"submit",className:"w-full rounded-2xl bg-black px-5 py-3 text-sm font-semibold text-white transition hover:bg-gray-900",children:"Send Magic Link"}),a.jsx("button",{type:"button",onClick:M,className:"w-full rounded-2xl border border-gray-200 bg-white px-5 py-3 text-xs font-semibold uppercase tracking-[0.25em] text-gray-900 transition hover:bg-gray-100",children:"Log In"})]})]}),t?a.jsx("div",{className:"mt-5 rounded-2xl border border-gray-200 bg-gray-50 px-4 py-3 text-sm text-gray-600",children:t}):null]})]}),b||!E||L?null:(0,a.jsxs)("div",{className:"mt-8 rounded-2xl border border-amber-200 bg-amber-50 p-6 text-amber-900 shadow-sm",children:[(0,a.jsxs)("div",{className:"text-sm",children:["You are signed in as ",e,", but this account is not authorized to edit the gallery."]}),a.jsx("button",{type:"button",onClick:T,className:"mt-4 rounded-xl border border-amber-200 bg-amber-100 px-4 py-3 text-xs font-semibold uppercase tracking-[0.25em] text-amber-900 transition hover:bg-amber-200",children:"Sign Out"})]}),!b&&L?(0,a.jsxs)("div",{className:"mt-10 space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-xs uppercase tracking-[0.35em] text-gray-500",children:"Admin Session"}),(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-900",children:["Signed in as ",e]})]}),a.jsx("button",{type:"button",onClick:T,className:"rounded-full border border-gray-200 bg-gray-900 px-5 py-2 text-xs font-semibold uppercase tracking-[0.25em] text-white transition hover:bg-black",children:"Sign Out"})]}),(0,a.jsxs)("div",{className:"rounded-2xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[a.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-gray-500",children:"Add Category"}),a.jsx("input",{type:"text",value:A,onChange:e=>P(e.target.value),placeholder:"New category",className:"w-full max-w-xs rounded-xl border border-gray-200 bg-gray-50 px-4 py-2 text-sm text-gray-900 placeholder-gray-400 focus:border-gray-300 focus:outline-none"}),a.jsx("button",{type:"button",onClick:()=>{let e=A.trim();!e||c.includes(e)||(g(r=>[...r,e]),P(""))},className:"rounded-xl border border-gray-200 bg-gray-900 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] !text-white transition hover:bg-black",children:"Add"}),a.jsx("div",{className:"h-6 w-px bg-gray-200"}),a.jsx("button",{type:"button",onClick:()=>{I.current?.click()},disabled:h,className:"rounded-xl border border-gray-200 bg-black px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] !text-white transition hover:bg-gray-900 disabled:cursor-not-allowed disabled:opacity-60",children:h?"Uploading...":"Add New Image"}),a.jsx("input",{ref:I,type:"file",accept:"image/*",multiple:!0,onChange:F,className:"hidden"})]}),v?a.jsx("div",{className:"mt-4 text-sm text-gray-600",children:v}):null]}),a.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:z.map((e,r)=>(0,a.jsxs)("div",{className:"group flex flex-col gap-4 rounded-2xl border border-gray-200 bg-white p-4 shadow-sm transition hover:border-gray-300",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-gray-200 bg-gray-100",children:[a.jsx("div",{className:"absolute left-3 top-3 z-10 rounded-full bg-white/90 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.3em] text-gray-700",children:r+1}),a.jsx("div",{className:"absolute right-3 top-3 z-10 rounded-full border border-gray-200 bg-white/90 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.25em] text-gray-700",children:e.category}),a.jsx("div",{className:"relative aspect-[4/3]",children:a.jsx(s.default,{src:e.src,alt:"Gallery preview",fill:!0,sizes:"(max-width: 1024px) 100vw, 33vw",unoptimized:!0,className:"object-cover transition duration-500 group-hover:scale-[1.02]"})})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[a.jsx("label",{className:"text-[10px] uppercase tracking-[0.35em] text-gray-500",children:"Category"}),(0,a.jsxs)("div",{className:"grid gap-2 md:grid-cols-[1fr_auto] md:items-center",children:[a.jsx("select",{value:e.category,onChange:r=>B(e.src,r.target.value),className:"w-full rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm text-gray-900 focus:border-gray-300 focus:outline-none",children:c.map(e=>a.jsx("option",{value:e,children:e},e))}),a.jsx("button",{type:"button",onClick:()=>D(e.src),disabled:!N[e.src]||m===e.src,className:"rounded-xl border border-gray-200 bg-white px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-black transition hover:bg-gray-100 disabled:cursor-not-allowed disabled:opacity-50",children:m===e.src?"Saving...":"Save"})]})]})]},e.src))})]}):null]})})}},6226:(e,r,t)=>{"use strict";t.d(r,{default:()=>s.a});var a=t(9029),s=t.n(a)},9029:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return d},getImageProps:function(){return n}});let a=t(1174),s=t(3078),l=t(2481),i=a._(t(6820));function n(e){let{props:r}=(0,s.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let d=l.Image},2839:(e,r,t)=>{"use strict";t.d(r,{ZP:()=>n});var a=t(8570);let s=(0,a.createProxy)(String.raw`/Users/dannymacias/Desktop/METALMAGIC/components/AdminGalleryManager.tsx`),{__esModule:l,$$typeof:i}=s;s.default;let n=(0,a.createProxy)(String.raw`/Users/dannymacias/Desktop/METALMAGIC/components/AdminGalleryManager.tsx#default`)}};